# 20241230
# 37:33
# 1 / 1

connected = ((0, 1, 2, 3, 4, 5),  # 0
             (0, 2, 3, 4, 5, 6),  # 1
             (0, 3, 4, 5, 6, 7),  # 2
             (0, 4, 5, 6, 7, 8),   # 3
             (0, 5, 6, 7, 8, 9),   # 4
             (0, 20, 21, 28, 24, 25),  # 5
             (0, 7, 8, 9, 10, 11),  # 6
             (0, 8, 9, 10, 11, 12),  # 7
             (0, 9, 10, 11, 12, 13),  # 8
             (0, 10, 11, 12, 13, 14),  # 9
             (0, 22, 23, 28, 26, 27),  # 10
             (0, 12, 13, 14, 15, 16),  # 11
             (0, 13, 14, 15, 16, 17),  # 12
             (0, 14, 15, 16, 17, 18),  # 13
             (0, 15, 16, 17, 18, 19),  # 14
             (0, 16, 17, 18, 19, 29),  # 15
             (0, 17, 18, 19, 29, 30),  # 16
             (0, 18, 19, 29, 30, 30),  # 17
             (0, 19, 29, 30, 30, 30),  # 18
             (0, 29, 30, 30, 30, 30),  # 19
             (0, 21, 28, 24, 25, 15),  # 20
             (0, 28, 24, 25, 15, 16),  # 21
             (0, 23, 28, 26, 27, 29),  # 22
             (0, 28, 26, 27, 29, 30),  # 23
             (0, 25, 15, 16, 17, 18),  # 24
             (0, 15, 16, 17, 18, 19),  # 25
             (0, 27, 29, 30, 30, 30),  # 26
             (0, 29, 30, 30, 30, 30),  # 27
             (0, 26, 27, 29, 30, 30),  # 28
             (0, 30, 30, 30, 30, 30),  # 29
             )

small = [0, 0, 0, 0]
big = [0, 0, 0, 0]

N = int(input())
for _ in range(N):
    moving, distance = input().split()
    distance = [5, 1, 2, 3, 4][distance.count('F')]
    if moving in "ABCD":
        moving = ord(moving) - ord('A')
        now = big[moving]
        nex = connected[now][distance]
        big[moving] = nex
        if now:
            for i in range(4):
                if big[i] == now:
                    big[i] = nex
        if nex != 30:
            for i in range(4):
                if small[i] == nex:
                    small[i] = 0

    else:
        moving = ord(moving) - ord('a')
        now = small[moving]
        nex = connected[now][distance]
        small[moving] = nex
        if now:
            for i in range(4):
                if small[i] == now:
                    small[i] = nex
        if nex != 30:
            for i in range(4):
                if big[i] == nex:
                    big[i] = 0

area = [['.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.'],
        ['.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.'],
        ['|', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', '|'],
        ['|', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '|'],
        ['.', '.', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', '.', '.'],
        ['.', '.', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', '.', '.'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.'],
        ['.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.'],
        ['.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
        ['.', '.', ' ', ' ', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', ' ', ' ', '.', '.'],
        ['.', '.', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', '.', '.'],
        ['|', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', ' ', '|'],
        ['|', ' ', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', ' ', '|'],
        ['|', ' ', '/', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '\\', ' ', '|'],
        ['.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.', ' ', ' ', ' ', ' ', '.', '.'],
        ['.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.', '-', '-', '-', '-', '.', '.']]

p_direction = ((0, 0), (0, 1), (1, 0), (1, 1))
index_by_position = (None,
                     (24, 30),  # 1
                     (18, 30),  # 2
                     (12, 30),  # 3
                     (6, 30),  # 4
                     (0, 30),  # 5
                     (0, 24),  # 6
                     (0, 18),  # 7
                     (0, 12),  # 8
                     (0, 6),  # 9
                     (0, 0),  # 10
                     (6, 0),  # 11
                     (12, 0),  # 12
                     (18, 0),  # 13
                     (24, 0),  # 14
                     (30, 0),  # 15
                     (30, 6),  # 16
                     (30, 12),  # 17
                     (30, 18),  # 18
                     (30, 24),  # 19
                     (5, 25),  # 20
                     (10, 20),  # 21
                     (5, 5),  # 22
                     (10, 10),  # 23
                     (20, 10),  # 24
                     (25, 5),  # 25
                     (20, 20),  # 26
                     (25, 25),  # 27
                     (15, 15),  # 28
                     (30, 30),  # 29
                     )
for i, position in enumerate(small):
    if position in (0, 30):
        continue
    y, x = index_by_position[position]
    dy, dx = p_direction[i]
    area[y + dy][x + dx] = chr(ord('a') + i)
for i, position in enumerate(big):
    if position in (0, 30):
        continue
    y, x = index_by_position[position]
    dy, dx = p_direction[i]
    area[y + dy][x + dx] = chr(ord('A') + i)
for row in area:
    print(*row, sep="")
